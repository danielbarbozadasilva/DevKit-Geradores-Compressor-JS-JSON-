<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>DevKit</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    integrity="sha384-kQTaIhOW1Ud8OG+HGzf5Ew9G4ix73zN7BwU9CqFZMRPN0zH9tX55DdaFSr+sQnLz" crossorigin="anonymous" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- Fonte Nunito -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet" />

  <!-- jsPDF e js-beautify -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-beautify/1.15.1/beautify.min.js"></script>

  <style>
    :root {
      /* Mantido apenas o "tema claro" */
      --bg-light: #f8f9fa;
      --bg-content: #fff;
      --bg-siderail: #e9ecef;

      --text-color: #212529;
      --text-muted: #6c757d;
      --primary-color: #0d6efd;
      --primary-hover: #0b5ed7;
      --border-color: #dee2e6;
      --input-bg: #fff;
      --input-border: #ced4da;
      --code-bg: #f1f3f5;
      --font-family: 'Nunito', sans-serif;
      --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      --sidebar-width: 260px;
      --sidebar-width-collapsed: 60px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: var(--font-family), Arial, sans-serif;
      background-color: var(--bg-light);
      color: var(--text-color);
      line-height: 1.6;
      display: flex;
      min-height: 100vh;
      margin: 0;
      padding: 0;
    }

    .app-container {
      display: flex;
      width: 100%;
    }

    .sidebar {
      width: var(--sidebar-width);
      background-color: var(--bg-siderail);
      border-right: 1px solid var(--border-color);
      padding-top: 15px;
      height: 100vh;
      overflow-y: auto;
      position: fixed;
      top: 0;
      left: 0;
      transition: width .3s ease;
      z-index: 1000;
      box-shadow: 0 1px 4px rgba(0, 0, 0, 0.2);
    }

    .sidebar h2 {
      font-size: 1.3rem;
      color: var(--primary-color);
      padding: 10px 20px;
      margin-bottom: 15px;
      font-weight: 700;
      white-space: nowrap;
      overflow: hidden;
      text-align: center;
    }

    .sidebar nav ul {
      list-style: none;
    }

    .sidebar nav a {
      display: flex;
      align-items: center;
      padding: 10px 20px;
      color: #495057;
      text-decoration: none;
      font-size: .98rem;
      transition: background-color .2s, color .2s, border-left-color .2s, padding-left .2s;
      border-left: 4px solid transparent;
      white-space: nowrap;
      overflow: hidden;
    }

    .sidebar nav a .link-text {
      margin-left: 12px;
    }

    .sidebar nav a:hover {
      background-color: #dee2e6;
      color: var(--primary-hover);
      border-left-color: #adb5bd;
    }

    .sidebar nav a.active {
      background-color: rgba(13, 110, 253, 0.1);
      color: var(--primary-color);
      font-weight: 600;
      border-left-color: var(--primary-color);
      padding-left: 16px;
    }

    .content-area {
      flex-grow: 1;
      padding: 35px 45px;
      margin-left: var(--sidebar-width);
      background-color: var(--bg-content);
      box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.05);
      transition: margin-left .3s ease;
    }

    .tool-section {
      display: none;
      animation: fadeIn .4s ease-out;
    }

    .tool-section.active {
      display: block;
    }

    .tool-section h3 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--text-color);
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-color);
    }

    .description {
      background-color: #f1f3f5;
      padding: 15px 20px;
      border-radius: 5px;
      margin-bottom: 25px;
      border-left: 4px solid var(--primary-color);
      color: var(--text-muted);
      font-size: .98rem;
      transition: background-color .3s;
    }

    .description p {
      margin-bottom: 10px;
    }

    .description p:last-child {
      margin-bottom: 0;
    }

    .description code {
      background-color: #d1e7fd;
      color: #0a58ca;
      padding: 3px 6px;
      border-radius: 3px;
      font-family: Consolas, Monaco, monospace;
      font-size: .9em;
    }

    .description strong {
      color: var(--text-color);
      font-weight: 600;
    }

    .disclaimer {
      margin: 25px 0;
      padding: 15px 20px;
      font-size: .9rem;
      color: #856404;
      background-color: #fff3cd;
      border: 1px solid #ffeeba;
      border-left-width: 4px;
      border-radius: 4px;
    }

    .disclaimer strong {
      color: #664d03;
    }

    .form-group {
      margin-bottom: 22px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #495057;
      font-size: .9rem;
    }

    .form-group input[type="text"],
    .form-group input[type="number"],
    .form-group input[type="password"],
    .form-group input[type="email"],
    .form-group input[type="url"],
    .form-group input[type="date"],
    .form-group textarea,
    .form-group select {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--input-border);
      border-radius: 6px;
      font-size: 1rem;
      font-family: var(--font-family);
      background-color: var(--input-bg);
      color: var(--text-color);
      transition: border-color .2s, box-shadow .2s;
    }

    .form-group input:focus,
    .form-group textarea:focus,
    .form-group select:focus {
      outline: 0;
      border-color: #86b7fe;
      box-shadow: 0 0 0 4px rgba(13, 110, 253, 0.25);
    }

    .form-group textarea {
      min-height: 140px;
      resize: vertical;
    }

    .form-group .checkbox-label {
      display: inline-flex;
      align-items: center;
      cursor: pointer;
      margin-bottom: 5px;
    }

    .form-group .checkbox-label input {
      margin-right: 8px;
      width: auto;
    }

    .button {
      padding: 12px 25px;
      background-color: var(--primary-color);
      color: #fff;
      border: 0;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1rem;
      font-weight: 600;
      transition: background-color .2s, transform .1s, box-shadow .2s;
      display: inline-block;
      margin-top: 5px;
      margin-right: 10px;
      box-shadow: 0 2px 5px rgba(13, 110, 253, 0.2);
    }

    .button:hover {
      background-color: var(--primary-hover);
      box-shadow: 0 4px 8px rgba(13, 110, 253, 0.3);
      transform: translateY(-1px);
    }

    .button:active {
      transform: scale(0.98);
      box-shadow: 0 1px 3px rgba(13, 110, 253, 0.2);
    }

    .button.secondary {
      background-color: var(--text-muted);
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .button.secondary:hover {
      background-color: #5a6268;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
    }

    .button.secondary:active {
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .output-area {
      margin-top: 25px;
      background-color: var(--code-bg);
      border: 1px solid var(--border-color);
      padding: 18px 22px;
      border-radius: 6px;
      font-family: Consolas, Monaco, monospace;
      font-size: 1rem;
      white-space: pre-wrap;
      word-wrap: break-word;
      min-height: 50px;
      color: #333;
      line-height: 1.5;
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.06);
      display: none;
      /* some .output-area come√ßa escondido */
    }

    .output-area.large {
      min-height: 150px;
    }

    .output-area.success {
      border-left: 4px solid #198754;
      background-color: #d1e7dd;
      color: #0f5132;
    }

    .output-area.error {
      border-left: 4px solid #dc3545;
      background-color: #f8d7da;
      color: #842029;
    }

    .output-area.warning {
      border-left: 4px solid #ffc107;
      background-color: #fff3cd;
      color: #664d03;
    }

    .minifier-container {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 20px;
    }

    .minifier-column {
      width: 48%;
    }

    .minifier-column label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #495057;
      font-size: .9rem;
    }

    .minifier-column textarea {
      width: 100%;
      padding: 12px 15px;
      border: 1px solid var(--input-border);
      border-radius: 6px;
      font-size: 1rem;
      font-family: Consolas, Monaco, monospace;
      background-color: var(--input-bg);
      color: var(--text-color);
      min-height: 500px;
      resize: vertical;
    }

    @media(max-width:992px) {
      .sidebar {
        width: var(--sidebar-width-collapsed);
      }

      .sidebar:hover {
        width: var(--sidebar-width);
      }

      .sidebar h2,
      .sidebar nav a .link-text {
        opacity: 0;
        transition: opacity .1s ease;
      }

      .sidebar:hover h2,
      .sidebar:hover nav a .link-text {
        opacity: 1;
      }

      .sidebar h2 {
        text-align: center;
        padding: 10px 5px;
      }

      .sidebar:hover h2 {
        text-align: center;
        padding: 10px 20px;
      }

      .sidebar nav a {
        justify-content: center;
        padding-left: 10px;
        padding-right: 10px;
      }

      .sidebar:hover nav a {
        justify-content: flex-start;
        padding-left: 20px;
      }

      .content-area {
        margin-left: var(--sidebar-width-collapsed);
      }

      .minifier-container {
        flex-direction: column;
      }

      .minifier-column {
        width: 100%;
      }
    }

    @media(max-width:576px) {
      .content-area {
        padding: 25px 15px;
        margin-left: 0;
      }

      .sidebar {
        position: static;
        width: 100%;
        height: auto;
        border-right: 0;
        border-bottom: 1px solid var(--border-color);
        overflow-y: hidden;
      }

      .sidebar h2 {
        text-align: center;
        opacity: 1;
      }

      .sidebar nav {
        display: flex;
        overflow-x: auto;
      }

      .sidebar nav ul {
        display: flex;
        flex-wrap: nowrap;
      }

      .sidebar nav li {
        flex-shrink: 0;
      }

      .sidebar nav a {
        border-left: none;
        border-bottom: 3px solid transparent;
        justify-content: center;
        padding: 10px 15px;
      }

      .sidebar nav a .link-text {
        opacity: 1;
        display: inline;
      }

      .sidebar nav a.active {
        border-left: none;
        border-bottom-color: var(--primary-color);
        background-color: transparent;
      }

      .tool-section h3 {
        font-size: 1.7rem;
      }

      .button {
        width: 100%;
        margin-bottom: 10px;
        margin-right: 0;
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }

      to {
        opacity: 1;
      }
    }

    /* Op√ß√µes de indenta√ß√£o (Desmimificar) */
    .options-area {
      margin-top: 15px;
      margin-bottom: 20px;
      padding: 12px 15px;
      background-color: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 6px;
      display: flex;
      align-items: center;
      gap: 10px 20px;
      flex-wrap: wrap;
    }

    .options-area label {
      margin-bottom: 0;
      font-weight: 500;
      color: #495057;
      font-size: 0.9rem;
    }

    .options-area select,
    .options-area input[type="number"] {
      padding: 8px 10px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 0.9rem;
      background-color: #fff;
      color: #495057;
      transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
      width: 70px;
    }
  </style>
</head>

<body>
  <div class="app-container">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <h2>DevKit</h2>
      <nav id="sidebar-nav">
        <ul>
          <li>
            <a href="#compressor-js-json" data-tool="compressor-js-json" class="active">
              <span class="link-text">Comprimir C√≥digo</span>
            </a>
          </li>
          <li>
            <a href="#corrigir-encoding-json" data-tool="corrigir-encoding-json">
              <span class="link-text">Corrigir Encoding JSON</span>
            </a>
          </li>
          <li>
            <a href="#desmimificar-codigo" data-tool="desmimificar-codigo">
              <span class="link-text">Desmimificar C√≥digo</span>
            </a>
          </li>
          <li>
            <a href="#gerador-cnh" data-tool="gerador-cnh">
              <span class="link-text">CNH</span>
            </a>
          </li>
          <li>
            <a href="#gerador-conta-bancaria" data-tool="gerador-conta-bancaria">
              <span class="link-text">Conta Banc√°ria</span>
            </a>
          </li>
          <li>
            <a href="#gerador-cpf" data-tool="gerador-cpf">
              <span class="link-text">CPF</span>
            </a>
          </li>
          <li>
            <a href="#gerador-nicks" data-tool="gerador-nicks">
              <span class="link-text">Nicks</span>
            </a>
          </li>
          <li>
            <a href="#gerador-nome" data-tool="gerador-nome">
              <span class="link-text">Nome</span>
            </a>
          </li>
          <li>
            <a href="#gerador-data-nascimento" data-tool="gerador-data-nascimento">
              <span class="link-text">Data de Nascimento</span>
            </a>
          </li>
          <li>
            <a href="#gerador-numeros-aleatorios" data-tool="gerador-numeros-aleatorios">
              <span class="link-text">N√∫meros Aleat√≥rios</span>
            </a>
          </li>
          <li>
            <a href="#gerador-pis-pasep" data-tool="gerador-pis-pasep">
              <span class="link-text">PIS/PASEP</span>
            </a>
          </li>
          <li>
            <a href="#gerador-cnpj" data-tool="gerador-cnpj">
              <span class="link-text">CNPJ</span>
            </a>
          </li>
          <li>
            <a href="#gerador-cep" data-tool="gerador-cep">
              <span class="link-text">CEP</span>
            </a>
          </li>
          <li>
            <a href="#gerador-rg" data-tool="gerador-rg">
              <span class="link-text">RG</span>
            </a>
          </li>
          <li>
            <a href="#gerador-inscricao-estadual" data-tool="gerador-inscricao-estadual">
              <span class="link-text">Inscri√ß√£o Estadual</span>
            </a>
          </li>
          <li>
            <a href="#gerador-titulo-eleitor" data-tool="gerador-titulo-eleitor">
              <span class="link-text">T√≠tulo de Eleitor</span>
            </a>
          </li>
          <li>
            <a href="#gerador-senha" data-tool="gerador-senha">
              <span class="link-text">Senha</span>
            </a>
          </li>
          <li>
            <a href="#gerador-pdf" data-tool="gerador-pdf">
              <span class="link-text">Gerador PDF Simples</span>
            </a>
          </li>
          <li>
            <a href="#anotacoes" data-tool="anotacoes">
              <span class="link-text">Anota√ß√µes</span>
            </a>
          </li>
          <li>
            <a href="#sobre-nos" data-tool="sobre-nos">
              <span class="link-text">Sobre n√≥s</span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>

    <!-- CONTE√öDO -->
    <main class="content-area">
      <!-- SE√á√ÉO DE BOAS-VINDAS -->
      <div class="tool-section" id="welcome">
        <h3>DevKit</h3>
        <p class="description">
          Ferramentas para gerar dados formatados e utilit√°rios para testes e desenvolvimento.
        </p>
        <div class="disclaimer">
          <strong>Aten√ß√£o:</strong> Geradores de documentos (CNH, CPF, CNPJ, PIS, RG, IE, T√≠tulo) criam n√∫meros com
          formato v√°lido, mas <strong>matematicamente inv√°lidos</strong>. Use-os exclusivamente para testes.
          O uso indevido √© de sua inteira responsabilidade.
        </div>
      </div>

      <!-- COMPRESSOR (MINIFICADOR) JS/JSON -->
      <div class="tool-section active" id="compressor-js-json">
        <h3>Comprimir C√≥digo</h3>
        <div class="description">
          <p>
            Remove coment√°rios e espa√ßos desnecess√°rios de c√≥digos JavaScript ou JSON, preservando espa√ßos dentro de
            strings, unificando em uma √∫nica linha.
          </p>
        </div>
        <div class="implementation-area">
          <div class="minifier-container">
            <div class="minifier-column">
              <label for="minificador-codigo-original">C√≥digo Original:</label>
              <textarea id="minificador-codigo-original"></textarea>
            </div>
            <div class="minifier-column">
              <label for="minificador-codigo-minificado">C√≥digo Minificado:</label>
              <textarea id="minificador-codigo-minificado" readonly></textarea>
            </div>
          </div>
          <button class="button" id="minificador-botao-minificar">Minificar</button>
          <div class="output-area" id="minificador-output-status"></div>
        </div>
      </div>

      <!-- CORRETOR DE ENCODING -->
      <div class="tool-section" id="corrigir-encoding-json">
        <h3>Corretor de Encoding de Texto</h3>
        <div class="description">
          <p>
            Cole o texto que possui problemas de encoding (UTF-8 mal interpretado, ou ISO-8859-1/Windows-1252 querendo
            ser UTF-8). Tentaremos normaliz√°-lo e exibi-lo como UTF-8 correto.
          </p>
        </div>

        <div class="implementation-area">
          <div class="form-group">
            <label for="inputText">Texto com Problema:</label>
            <textarea id="inputText" rows="8" placeholder="Exemplo: Ol√É¬° Mundo"></textarea>
          </div>

          <button class="button" id="correctButton">Corrigir Encoding</button>

          <div class="form-group">
            <label for="outputText">Texto Corrigido (UTF-8):</label>
            <textarea id="outputText" rows="8" readonly placeholder="O texto corrigido aparecer√° aqui..."></textarea>
          </div>

          <!-- Status da convers√£o -->
          <div class="output-area" id="statusArea">
            <!-- Podemos deixar um t√≠tulo se desejar -->
            <h4 style="margin-top:0">Status da Convers√£o:</h4>
            <p id="statusMessage">Aguardando entrada...</p>
          </div>
        </div>
      </div>

      <!-- DESMIMIFICAR C√ìDIGO -->
      <div class="tool-section" id="desmimificar-codigo">
        <h3>Desmimificar C√≥digo (JS/JSON) <span class="beta-badge">Com js-beautify</span></h3>
        <div class="description">
          <p>
            Cole seu c√≥digo JavaScript ou JSON minificado/desorganizado abaixo. A ferramenta utilizar√° a biblioteca
            <code>js-beautify</code> para format√°-lo, aplicando indenta√ß√£o e espa√ßamento para melhor legibilidade.
          </p>
        </div>

        <div class="options-area">
          <label for="indentation-type-desmimificar">Indenta√ß√£o:</label>
          <select id="indentation-type-desmimificar" aria-label="Tipo de indenta√ß√£o">
            <option value="spaces">Espa√ßos</option>
            <option value="tabs">Tabs</option>
          </select>

          <label for="indentation-size-desmimificar">Tamanho:</label>
          <input type="number" id="indentation-size-desmimificar" value="2" min="1" max="8"
            aria-label="Tamanho da indenta√ß√£o (para espa√ßos)" />
        </div>

        <div class="implementation-area">
          <div class="minifier-container">
            <div class="minifier-column">
              <label for="desmimificar-codigo-original">C√≥digo Original (JS/JSON):</label>
              <textarea id="desmimificar-codigo-original" placeholder="Cole seu c√≥digo aqui..." rows="18"></textarea>
            </div>
            <div class="minifier-column">
              <label for="desmimificar-codigo-output">C√≥digo Formatado:</label>
              <textarea id="desmimificar-codigo-output" readonly placeholder="O c√≥digo formatado aparecer√° aqui..."
                rows="18"></textarea>
            </div>
          </div>
          <button class="button" id="botao-desmimificar">Desmimificar com js-beautify</button>
          <div class="output-area" id="status-desmimificar"></div>
        </div>
      </div>

      <!-- GERADOR CNH -->
      <div class="tool-section" id="gerador-cnh">
        <h3>Gerador de CNH</h3>
        <div class="description">
          <p>Gera um n√∫mero de CNH (11 d√≠gitos) formatado, com dados adicionais fict√≠cios.</p>
          <p><strong>L√≥gica:</strong> Cria 11 d√≠gitos aleat√≥rios. Datas e categorias s√£o aleat√≥rias.</p>
          <p><strong>Sa√≠da:</strong> N√∫mero CNH, Validade Fict√≠cia, Categoria Aleat√≥ria.</p>
        </div>
        <div class="disclaimer">
          N√∫mero de CNH gerado √© inv√°lido. Apenas para testes.
        </div>
        <div class="implementation-area">
          <button class="button" id="btn-gerar-cnh">Gerar CNH</button>
          <div class="output-area" id="output-cnh"></div>
        </div>
      </div>

      <!-- GERADOR CONTA BANC√ÅRIA -->
      <div class="tool-section" id="gerador-conta-bancaria">
        <h3>Gerador de Conta Banc√°ria</h3>
        <div class="description">
          <p>
            Gera dados fict√≠cios de conta banc√°ria (Banco, Ag√™ncia, Conta com DV aleat√≥rio).
          </p>
          <p>
            <strong>L√≥gica:</strong> Seleciona um banco da lista, gera ag√™ncia e conta aleat√≥rias, incluindo um
            d√≠gito verificador aleat√≥rio (n√£o calculado).
          </p>
          <p><strong>Sa√≠da:</strong> Banco, Ag√™ncia, Conta.</p>
        </div>
        <div class="disclaimer">
          Dados banc√°rios gerados s√£o inv√°lidos. Apenas para testes.
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="conta-banco-select">Selecionar Banco (Opcional):</label>
            <select id="conta-banco-select">
              <option value>Aleat√≥rio</option>
            </select>
          </div>
          <button class="button" id="btn-gerar-conta">Gerar Conta</button>
          <div class="output-area" id="output-conta"></div>
        </div>
      </div>

      <!-- GERADOR CPF -->
      <div class="tool-section" id="gerador-cpf">
        <h3>Gerador de CPF</h3>
        <div class="description">
          <p>
            Gera n√∫meros de CPF formatados (<code>XXX.XXX.XXX-XX</code>) e
            <strong>matematicamente inv√°lidos</strong>.
          </p>
          <p>
            <strong>L√≥gica:</strong> Gera 11 d√≠gitos aleat√≥rios e aplica formata√ß√£o opcional.
          </p>
        </div>
        <div class="disclaimer">
          Use apenas para testes. CPFs gerados s√£o inv√°lidos.
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="cpf-formatado" checked />
              Gerar com pontua√ß√£o?
            </label>
          </div>
          <button class="button" id="btn-gerar-cpf">Gerar CPF</button>
          <div class="output-area" id="output-cpf"></div>
        </div>
      </div>

      <!-- GERADOR NICKS -->
      <div class="tool-section" id="gerador-nicks">
        <h3>Gerador de Nicks</h3>
        <div class="description">
          <p>Cria sugest√µes de Nomes de Usu√°rio (nicks).</p>
          <p><strong>L√≥gica:</strong> Combina uma palavra-chave (opcional) com prefixos/sufixos comuns e n√∫meros.</p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="nick-keyword">Palavra-chave (Opcional):</label>
            <input type="text" id="nick-keyword" />
          </div>
          <div class="form-group">
            <label for="nick-qtd">Quantidade de Sugest√µes:</label>
            <input type="number" id="nick-qtd" value="5" min="1" max="20" />
          </div>
          <button class="button" id="btn-gerar-nicks">Gerar Nicks</button>
          <div class="output-area large" id="output-nicks"></div>
        </div>
      </div>

      <!-- GERADOR NOME -->
      <div class="tool-section" id="gerador-nome">
        <h3>Gerador de Nome</h3>
        <div class="description">
          <p>Gera nomes e sobrenomes brasileiros fict√≠cios.</p>
          <p><strong>L√≥gica:</strong> Combina nomes e sobrenomes de listas pr√©-definidas.</p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="nome-genero">G√™nero (Opcional):</label>
            <select id="nome-genero">
              <option value="aleatorio" selected>Aleat√≥rio</option>
              <option value="masculino">Masculino</option>
              <option value="feminino">Feminino</option>
            </select>
          </div>
          <button class="button" id="btn-gerar-nome">Gerar Nome</button>
          <div class="output-area" id="output-nome"></div>
        </div>
      </div>

      <!-- GERADOR DATA DE NASCIMENTO -->
      <div class="tool-section" id="gerador-data-nascimento">
        <h3>Gerador de Data de Nascimento</h3>
        <div class="description">
          <p>Gera uma data de nascimento aleat√≥ria dentro de um intervalo de anos.</p>
          <p><strong>L√≥gica:</strong> Escolhe aleatoriamente ano, m√™s e dia (v√°lido).</p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="nasc-ano-min">Ano M√≠nimo:</label>
            <input type="number" id="nasc-ano-min" value="1950" min="1900" max="2024" />
          </div>
          <div class="form-group">
            <label for="nasc-ano-max">Ano M√°ximo:</label>
            <input type="number" id="nasc-ano-max" value="2005" min="1901" max="2025" />
          </div>
          <button class="button" id="btn-gerar-data-nasc">Gerar Data</button>
          <div class="output-area" id="output-data-nasc"></div>
        </div>
      </div>

      <!-- GERADOR N√öMEROS ALEAT√ìRIOS -->
      <div class="tool-section" id="gerador-numeros-aleatorios">
        <h3>Gerador de N√∫meros Aleat√≥rios</h3>
        <div class="description">
          <p>Gera n√∫meros inteiros dentro de um intervalo especificado.</p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="num-min">M√≠nimo:</label>
            <input type="number" id="num-min" value="1" />
          </div>
          <div class="form-group">
            <label for="num-max">M√°ximo:</label>
            <input type="number" id="num-max" value="100" />
          </div>
          <div class="form-group">
            <label for="num-qtd">Quantidade:</label>
            <input type="number" id="num-qtd" value="5" min="1" />
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="num-repetir" checked />
              Permitir Repeti√ß√£o?
            </label>
          </div>
          <button class="button" id="btn-gerar-numeros">Gerar N√∫meros</button>
          <div class="output-area" id="output-numeros"></div>
        </div>
      </div>

      <!-- GERADOR PIS/PASEP -->
      <div class="tool-section" id="gerador-pis-pasep">
        <h3>Gerador de PIS/PASEP</h3>
        <div class="description">
          <p>
            Gera n√∫meros no formato PIS/PASEP (<code>XXX.XXXXX.XX-X</code>) e
            <strong>inv√°lidos</strong>.
          </p>
          <p><strong>L√≥gica:</strong> Gera 11 d√≠gitos aleat√≥rios e formata.</p>
        </div>
        <div class="disclaimer">
          N√∫mero PIS/PASEP gerado √© inv√°lido. Apenas para testes.
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="pis-formatado" checked />
              Gerar com pontua√ß√£o?
            </label>
          </div>
          <button class="button" id="btn-gerar-pis">Gerar PIS/PASEP</button>
          <div class="output-area" id="output-pis"></div>
        </div>
      </div>

      <!-- GERADOR CNPJ -->
      <div class="tool-section" id="gerador-cnpj">
        <h3>Gerador de CNPJ</h3>
        <div class="description">
          <p>
            Gera n√∫meros de CNPJ formatados (<code>XX.XXX.XXX/YYYY-ZZ</code>) e
            <strong>inv√°lidos</strong>.
          </p>
          <p><strong>L√≥gica:</strong> Gera 14 d√≠gitos aleat√≥rios e formata.</p>
        </div>
        <div class="disclaimer">
          Use apenas para testes. CNPJs gerados s√£o inv√°lidos.
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="cnpj-formatado" checked />
              Gerar com pontua√ß√£o?
            </label>
          </div>
          <button class="button" id="btn-gerar-cnpj">Gerar CNPJ</button>
          <div class="output-area" id="output-cnpj"></div>
        </div>
      </div>

      <!-- GERADOR CEP -->
      <div class="tool-section" id="gerador-cep">
        <h3>Gerador de CEP</h3>
        <div class="description">
          <p>Gera c√≥digos CEP formatados (<code>NNNNN-NNN</code>).</p>
          <p><strong>L√≥gica:</strong> Gera 8 n√∫meros aleat√≥rios e formata.</p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="cep-formatado" checked />
              Gerar com pontua√ß√£o?
            </label>
          </div>
          <button class="button" id="btn-gerar-cep">Gerar CEP</button>
          <div class="output-area" id="output-cep"></div>
        </div>
      </div>

      <!-- GERADOR RG -->
      <div class="tool-section" id="gerador-rg">
        <h3>Gerador de RG</h3>
        <div class="description">
          <p>
            Gera n√∫meros de RG formatados e <strong>inv√°lidos</strong> para um estado selecionado (Exemplo: SP).
          </p>
          <p><strong>L√≥gica:</strong> Gera d√≠gitos aleat√≥rios e aplica a m√°scara do estado.</p>
        </div>
        <div class="disclaimer">
          RG gerado √© inv√°lido. Formato pode n√£o corresponder a todos os estados.
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="rg-uf">Estado (UF) para Formato:</label>
            <select id="rg-uf">
              <option value="SP" selected>S√£o Paulo (SP) - Exemplo</option>
              <option value="RJ">Rio de Janeiro (RJ) - Exemplo</option>
              <option value="outro">Outro (Sem formato espec√≠fico)</option>
            </select>
          </div>
          <button class="button" id="btn-gerar-rg">Gerar RG</button>
          <div class="output-area" id="output-rg"></div>
        </div>
      </div>

      <!-- GERADOR INSCRI√á√ÉO ESTADUAL -->
      <div class="tool-section" id="gerador-inscricao-estadual">
        <h3>Gerador Inscri√ß√£o Estadual (IE)</h3>
        <div class="description">
          <p>
            Gera n√∫meros de IE formatados e <strong>inv√°lidos</strong> para um estado (Exemplo: SP).
          </p>
          <p><strong>L√≥gica:</strong> Gera d√≠gitos aleat√≥rios e aplica m√°scara. Regras variam por UF.</p>
        </div>
        <div class="disclaimer">
          IE gerada √© inv√°lida e apenas para o formato de exemplo (SP).
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="ie-uf">Estado (UF) para Formato:</label>
            <select id="ie-uf">
              <option value="SP" selected>S√£o Paulo (SP) - Exemplo</option>
              <option value="outro">Outro (Sem formato espec√≠fico)</option>
            </select>
          </div>
          <button class="button" id="btn-gerar-ie">Gerar IE (Exemplo SP)</button>
          <div class="output-area" id="output-ie"></div>
        </div>
      </div>

      <!-- GERADOR T√çTULO DE ELEITOR -->
      <div class="tool-section" id="gerador-titulo-eleitor">
        <h3>Gerador T√≠tulo de Eleitor</h3>
        <div class="description">
          <p>
            Gera n√∫meros de T√≠tulo de Eleitor formatados (<code>NNNN NNNN NN NN</code>) e
            <strong>inv√°lidos</strong>.
          </p>
          <p><strong>L√≥gica:</strong> Gera 12 d√≠gitos aleat√≥rios e aplica a formata√ß√£o.</p>
        </div>
        <div class="disclaimer">
          T√≠tulo gerado √© inv√°lido. Apenas para testes.
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="titulo-formatado" checked />
              Gerar com espa√ßos?
            </label>
          </div>
          <button class="button" id="btn-gerar-titulo">Gerar T√≠tulo</button>
          <div class="output-area" id="output-titulo"></div>
        </div>
      </div>

      <!-- GERADOR SENHA -->
      <div class="tool-section" id="gerador-senha">
        <h3>Gerador de Senha</h3>
        <div class="description">
          <p>Cria senhas aleat√≥rias fortes baseadas em crit√©rios do usu√°rio.</p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="senha-length">Comprimento:</label>
            <input type="number" id="senha-length" value="16" min="4" max="128" />
          </div>
          <div class="form-group">
            <label class="checkbox-label">
              <input type="checkbox" id="senha-upper" checked />
              Incluir Mai√∫sculas (ABC)
            </label><br />
            <label class="checkbox-label">
              <input type="checkbox" id="senha-lower" checked />
              Incluir Min√∫sculas (abc)
            </label><br />
            <label class="checkbox-label">
              <input type="checkbox" id="senha-numbers" checked />
              Incluir N√∫meros (123)
            </label><br />
            <label class="checkbox-label">
              <input type="checkbox" id="senha-symbols" checked />
              Incluir S√≠mbolos (!@#$)
            </label>
          </div>
          <button class="button" id="btn-gerar-senha">Gerar Senha</button>
          <div class="output-area" id="output-senha" style="font-size:1.1rem;word-break:break-all"></div>
        </div>
      </div>

      <!-- GERADOR PDF -->
      <div class="tool-section" id="gerador-pdf">
        <h3>Gerador PDF Simples</h3>
        <div class="description">
          <p>Cria um arquivo PDF b√°sico contendo o texto fornecido.</p>
          <p>
            <strong>L√≥gica:</strong> Utiliza a biblioteca jsPDF para inserir o texto em um documento PDF e o
            disponibiliza para download com um nome sequencial.
          </p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="pdf-text-content">Texto para o PDF:</label>
            <textarea id="pdf-text-content" rows="10"></textarea>
          </div>
          <div class="form-group">
            <label for="pdf-base-filename">Nome base do arquivo (sem .pdf):</label>
            <input type="text" id="pdf-base-filename" value="documento" />
          </div>
          <button class="button" id="btn-gerar-pdf">Gerar e Baixar PDF</button>
          <div id="pdf-counter-info" style="font-size:0.85rem;color:var(--text-muted);margin-top:10px">
            Pr√≥ximo arquivo: <span id="pdf-next-count">1</span>
          </div>
        </div>
      </div>

      <!-- ANOTA√á√ïES -->
      <div class="tool-section" id="anotacoes">
        <h3>Anota√ß√µes</h3>
        <div class="description">
          <p>Crie e salve anota√ß√µes localmente neste navegador.</p>
        </div>
        <div class="implementation-area">
          <div class="form-group">
            <label for="anotacoes-texto">Suas Anota√ß√µes:</label>
            <textarea id="anotacoes-texto" rows="8"></textarea>
          </div>
          <button class="button" id="btn-salvar-anotacoes">Salvar Anota√ß√µes</button>
          <div class="output-area" id="anotacoes-status"></div>
        </div>
      </div>

      <!-- SOBRE N√ìS -->
      <div class="tool-section" id="sobre-nos">
        <h3>Sobre n√≥s</h3>
        <div class="description">
          <p>Desenvolvido por Daniel Barboza da Silva</p>
        </div>
      </div>
    </main>
  </div>

  <script>
    /**********************************
     * 1) L√ìGICA PARA EXIBIR SE√á√ïES   *
     **********************************/
    document.addEventListener("DOMContentLoaded", function () {
      const navLinks = document.querySelectorAll('#sidebar-nav a[data-tool]');
      const allSections = document.querySelectorAll('.tool-section');

      navLinks.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          // Remove "active" de todos os links e se√ß√µes
          navLinks.forEach(ln => ln.classList.remove('active'));
          allSections.forEach(section => section.classList.remove('active'));

          // Pega o id da se√ß√£o alvo
          const toolId = link.getAttribute('data-tool');
          const targetSection = document.getElementById(toolId);

          // Ativa a se√ß√£o e o link
          if (targetSection) {
            targetSection.classList.add('active');
          }
          link.classList.add('active');
        });
      });
    });

    /*************************************
     * 2) FUN√á√ïES DE MINIFICA√á√ÉO E AFIN   *
     *************************************/
    const btnMinificar = document.getElementById("minificador-botao-minificar");
    const codigoOriginalTextarea = document.getElementById("minificador-codigo-original");
    const codigoMinificadoTextarea = document.getElementById("minificador-codigo-minificado");
    const minificadorStatus = document.getElementById("minificador-output-status");

    if (
      btnMinificar &&
      codigoOriginalTextarea &&
      codigoMinificadoTextarea &&
      minificadorStatus
    ) {
      btnMinificar.addEventListener("click", () => {
        const codigoOriginal = codigoOriginalTextarea.value;
        minificadorStatus.style.display = 'none'; // reinicia
        minificadorStatus.className = 'output-area';

        if (!codigoOriginal.trim()) {
          codigoMinificadoTextarea.value = "";
          minificadorStatus.textContent = "Nenhum c√≥digo para minificar.";
          minificadorStatus.style.display = "block";
          minificadorStatus.classList.add("warning");
          return;
        }
        const codigoMinificadoTexto = minifyCode(codigoOriginal);
        codigoMinificadoTextarea.value = codigoMinificadoTexto;

        if (codigoMinificadoTexto === "Erro durante a minifica√ß√£o.") {
          minificadorStatus.textContent = "Ocorreu um erro durante a minifica√ß√£o.";
          minificadorStatus.style.display = "block";
          minificadorStatus.classList.add("error");
        } else {
          const originalLength = codigoOriginal.length;
          const minifiedLength = codigoMinificadoTexto.length;
          const reduction = originalLength > 0
            ? ((1 - (minifiedLength / originalLength)) * 100).toFixed(1)
            : 0;
          minificadorStatus.textContent = `Minificado com sucesso! Redu√ß√£o de ${reduction}%.`;
          minificadorStatus.style.display = "block";
          minificadorStatus.classList.add("success");
        }
      });
    }

    function minifyCode(code) {
      try {
        // Extra simplificado para remover coment√°rios e espa√ßos
        const tokens = [];
        let placeholders = [];
        let placeholderIndex = 0;
        let insideSingle = false;
        let insideDouble = false;
        let insideBacktick = false;
        let result = "";

        for (let i = 0; i < code.length; i++) {
          const char = code[i];
          const prevChar = code[i - 1] || "";
          if (!insideSingle && !insideDouble && !insideBacktick) {
            if (char === '"') {
              insideDouble = true;
              result += '$$_STRPLACE_' + placeholderIndex + '_$';
              tokens.push('"');
              placeholders.push('');
              placeholderIndex++;
              continue;
            }
            if (char === "'") {
              insideSingle = true;
              result += '$$_STRPLACE_' + placeholderIndex + '_$';
              tokens.push("'");
              placeholders.push('');
              placeholderIndex++;
              continue;
            }
            if (char === '`') {
              insideBacktick = true;
              result += '$$_STRPLACE_' + placeholderIndex + '_$';
              tokens.push('`');
              placeholders.push('');
              placeholderIndex++;
              continue;
            }
            result += char;
          } else {
            if (insideDouble) {
              if (char === '"' && prevChar !== '\\') {
                insideDouble = false;
                continue;
              }
              placeholders[placeholderIndex - 1] += char;
            } else if (insideSingle) {
              if (char === "'" && prevChar !== '\\') {
                insideSingle = false;
                continue;
              }
              placeholders[placeholderIndex - 1] += char;
            } else if (insideBacktick) {
              if (char === '`' && prevChar !== '\\') {
                insideBacktick = false;
                continue;
              }
              placeholders[placeholderIndex - 1] += char;
            }
          }
        }
        let withoutComments = result
          .replace(/\/\/.*$/gm, "")
          .replace(/\/\*[\s\S]*?\*\//g, "");
        // Remove espa√ßos em excesso
        withoutComments = withoutComments.replace(/\s+/g, " ");
        withoutComments = withoutComments.trim();

        // Recoloca as strings
        for (let i = 0; i < placeholderIndex; i++) {
          const placeholderRegex = new RegExp('\\$\\$_STRPLACE_' + i + '_\\$');
          let wrapChar = tokens[i] || '"';
          let inner = placeholders[i];
          placeholders[i] = wrapChar + inner + wrapChar;
          withoutComments = withoutComments.replace(placeholderRegex, placeholders[i]);
        }
        return withoutComments;
      } catch (e) {
        return "Erro durante a minifica√ß√£o.";
      }
    }

    /*****************************************
     * 3) DESMIMIFICAR (Beautify) JS/JSON    *
     *****************************************/
    const botaoDesmimificar = document.getElementById("botao-desmimificar");
    const desmimificarOriginal = document.getElementById("desmimificar-codigo-original");
    const desmimificarOutput = document.getElementById("desmimificar-codigo-output");
    const desmimificarStatus = document.getElementById("status-desmimificar");
    const indentationTypeSelectDesmimificar = document.getElementById("indentation-type-desmimificar");
    const indentationSizeInputDesmimificar = document.getElementById("indentation-size-desmimificar");

    if (
      botaoDesmimificar &&
      desmimificarOriginal &&
      desmimificarOutput &&
      desmimificarStatus &&
      indentationTypeSelectDesmimificar &&
      indentationSizeInputDesmimificar
    ) {
      botaoDesmimificar.addEventListener("click", () => {
        desmimificarStatus.style.display = "none";
        desmimificarOutput.value = "";
        desmimificarStatus.className = "output-area";

        const cod = desmimificarOriginal.value.trim();
        if (!cod) {
          desmimificarStatus.textContent = "Nenhum c√≥digo para desmimificar.";
          desmimificarStatus.style.display = "block";
          desmimificarStatus.classList.add("error");
          return;
        }

        desmimificarStatus.textContent = "Processando...";
        desmimificarStatus.style.display = "block";

        setTimeout(() => {
          const indentType = indentationTypeSelectDesmimificar.value;
          const indentSize = parseInt(indentationSizeInputDesmimificar.value, 10);

          // Primeiro, tenta JSON.parse
          let result;
          try {
            const parsed = JSON.parse(cod);
            result = JSON.stringify(parsed, null, indentType === 'tabs' ? '\t' : ' '.repeat(indentSize));
            desmimificarOutput.value = result;

            if (result !== cod) {
              desmimificarStatus.textContent = "C√≥digo JSON formatado com sucesso!";
              desmimificarStatus.classList.add("success");
            } else {
              desmimificarStatus.textContent = "A formata√ß√£o n√£o alterou o JSON (j√° estava formatado).";
              desmimificarStatus.classList.add("info");
            }
          } catch (e) {
            // N√£o √© JSON, formata como JS
            const beautified = beautifyJSManual(cod, indentType, indentSize);
            desmimificarOutput.value = beautified;

            if (beautified.trim() !== '' && beautified !== cod) {
              desmimificarStatus.textContent = "C√≥digo JavaScript formatado com sucesso!";
              desmimificarStatus.classList.add("success");
            } else if (beautified === cod) {
              desmimificarStatus.textContent = "A formata√ß√£o n√£o alterou o c√≥digo (j√° estava formatado?).";
              desmimificarStatus.classList.add("info");
            } else {
              desmimificarStatus.textContent = "N√£o foi poss√≠vel formatar adequadamente o c√≥digo.";
              desmimificarStatus.classList.add("error");
            }
          }
        }, 50);
      });
    }

    function beautifyJSManual(code, indentType, indentSizeNum) {
      let output = '';
      let indentLevel = 0;
      const indentSize = parseInt(indentSizeNum, 10) || 2;
      const indentUnit = indentType === 'tabs' ? '\t' : ' '.repeat(indentSize);

      let inSingleLineComment = false;
      let inMultiLineComment = false;
      let inString = false;
      let stringChar = '';
      let lastMeaningfulToken = '';

      code = code.replace(/\r\n?/g, '\n').trim();
      const lines = code.split('\n');
      let formattedLines = [];

      for (let line of lines) {
        line = line.trim();
        if (!line && !inMultiLineComment) {
          if (
            formattedLines.length > 0 &&
            !formattedLines[formattedLines.length - 1].match(/^\s*$/)
          ) {
            if (
              !(
                formattedLines.length > 1 &&
                formattedLines[formattedLines.length - 1].match(/^\s*$/) &&
                formattedLines[formattedLines.length - 2].match(/^\s*$/)
              )
            ) {
              formattedLines.push('');
            }
          }
          continue;
        }

        let currentFormattedLine = '';
        let lineIndentPrefix = indentUnit.repeat(indentLevel);

        if (inMultiLineComment) {
          currentFormattedLine = lineIndentPrefix + line;
          if (line.includes('*/')) {
            inMultiLineComment = false;
          }
          formattedLines.push(currentFormattedLine);
          continue;
        }

        if (
          line.startsWith('}') ||
          line.startsWith(')') ||
          line.startsWith(']') ||
          line.startsWith('};') ||
          line.startsWith('});')
        ) {
          indentLevel = Math.max(0, indentLevel - 1);
          lineIndentPrefix = indentUnit.repeat(indentLevel);
        }

        currentFormattedLine = lineIndentPrefix;
        for (let i = 0; i < line.length; i++) {
          const char = line[i];
          const nextChar = line[i + 1] || '';

          if (inSingleLineComment) {
            currentFormattedLine += char;
            continue;
          }
          if (inString) {
            currentFormattedLine += char;
            if (
              char === stringChar &&
              (line[i - 1] !== '\\' ||
                (line[i - 1] === '\\' && line[i - 2] === '\\'))
            ) {
              inString = false;
            }
            continue;
          }

          if (char === '/' && nextChar === '/') {
            currentFormattedLine += '//';
            inSingleLineComment = true;
            currentFormattedLine += line.substring(i + 2);
            break;
          }
          if (char === '/' && nextChar === '*') {
            currentFormattedLine += '/*';
            inMultiLineComment = true;
            i++;
            lastMeaningfulToken = '/*';
            continue;
          }
          if (char === '"' || char === "'" || char === '`') {
            currentFormattedLine += char;
            inString = true;
            stringChar = char;
            lastMeaningfulToken = 'string';
            continue;
          }

          if (char === '{') {
            if (
              currentFormattedLine.trim() !== lineIndentPrefix.trim() &&
              !currentFormattedLine.endsWith(' ') &&
              !currentFormattedLine.endsWith('(') &&
              !currentFormattedLine.endsWith(',')
            ) {
              currentFormattedLine += ' ';
            }
            currentFormattedLine += char;
            indentLevel++;
            lastMeaningfulToken = '{';
          } else if (char === '}') {
            currentFormattedLine = currentFormattedLine.trimEnd();
            currentFormattedLine += '\n' + indentUnit.repeat(Math.max(0, indentLevel - 1));
            currentFormattedLine += '}';
            lastMeaningfulToken = '}';
          } else if (char === ';') {
            currentFormattedLine = currentFormattedLine.trimEnd() + char;
            lastMeaningfulToken = ';';
          } else if (char === '(' || char === '[') {
            currentFormattedLine += char;
            lastMeaningfulToken = char;
          } else if (
            char.match(/[+\-*/%&|=<>?!:]/) &&
            nextChar.match(/[+\-*/%&|=<>?!:]/)
          ) {
            const operator = char + nextChar;
            if (
              line[i + 2] &&
              (operator + line[i + 2]).match(
                /===|!==|>>=|<<=|>>>|&&&|\|\|\||\*\*=|&&=|\|\|=|\?\?=|\/\/=|\^\^=/
              )
            ) {
              const longOp = operator + line[i + 2];
              if (!currentFormattedLine.endsWith(' ')) currentFormattedLine += ' ';
              currentFormattedLine += longOp;
              if (line[i + 3] && !line[i + 3].match(/^[\s;(){},]/)) {
                currentFormattedLine += ' ';
              }
              i += 2;
            } else {
              if (!currentFormattedLine.endsWith(' ')) currentFormattedLine += ' ';
              currentFormattedLine += operator;
              if (line[i + 2] && !line[i + 2].match(/^[\s;(){},=\-+*%/]/)) {
                currentFormattedLine += ' ';
              }
              i += 1;
            }
            lastMeaningfulToken = 'operator';
          } else if (char.match(/[+\-*/%&|=<>?!:]/)) {
            if (
              !currentFormattedLine.endsWith(' ') &&
              !currentFormattedLine.match(/[({[]$/) &&
              lastMeaningfulToken !== 'operator'
            ) {
              if (
                !(
                  (char === '+' || char === '-') &&
                  (lastMeaningfulToken === '' ||
                    lastMeaningfulToken.match(/[[({=,:]$/))
                )
              ) {
                currentFormattedLine += ' ';
              }
            }
            currentFormattedLine += char;
            if (
              nextChar &&
              !nextChar.match(/^[\s;(){},=\-+*%/]/) &&
              !currentFormattedLine.endsWith(' ')
            ) {
              currentFormattedLine += ' ';
            }
            lastMeaningfulToken = 'operator';
          } else if (char === ',') {
            currentFormattedLine = currentFormattedLine.trimEnd() + char + ' ';
            lastMeaningfulToken = ',';
          } else {
            currentFormattedLine += char;
            if (!char.match(/\s/)) {
              lastMeaningfulToken = char;
            }
          }
        }
        formattedLines.push(currentFormattedLine.trimEnd());
        inSingleLineComment = false;
        indentLevel = Math.max(0, indentLevel);
      }

      output = formattedLines.join('\n');
      output = output.replace(/\n\s*\n(\s*\n)+/g, '\n\n');
      output = output.split('\n').map(l => l.trimEnd()).join('\n');
      return output.trim();
    }

    /************************************************
     * 4) CORRETOR DE ENCODING DE TEXTO (UTF-8)      *
     ************************************************/
    const correctButton = document.getElementById("correctButton");
    const inputText = document.getElementById("inputText");
    const outputText = document.getElementById("outputText");
    const statusArea = document.getElementById("statusArea");
    const statusMessage = document.getElementById("statusMessage");
    if (correctButton && inputText && outputText && statusArea && statusMessage) {
      correctButton.addEventListener("click", () => {
        const originalStr = inputText.value;
        if (!originalStr) {
          statusMessage.textContent = "N√£o h√° texto para corrigir.";
          statusArea.style.display = "block";
          statusArea.className = "output-area warning";
          return;
        }
        // Exibir status "processando"
        statusMessage.textContent = "Processando corre√ß√£o...";
        statusArea.style.display = "block";
        statusArea.className = "output-area info";

        setTimeout(() => {
          try {
            // Exemplo de corre√ß√£o dupla:
            // 1) Tentar decodificar como se fosse ISO-8859-1 (ou Windows-1252)
            // 2) Gerar string em UTF-8
            // Este √© um exemplo simplificado. Pode-se usar libs ou heur√≠sticas mais avan√ßadas.

            // Fun√ß√£o simples de substitui√ß√£o manual de caracteres t√≠picos de erros
            let corrected = fixCommonEncodingErrors(originalStr);

            outputText.value = corrected;
            statusMessage.textContent = "Texto corrigido com sucesso!";
            statusArea.className = "output-area success";
          } catch (err) {
            statusMessage.textContent = "Erro ao tentar corrigir: " + err;
            statusArea.className = "output-area error";
          }
        }, 100);
      });
    }

    function fixCommonEncodingErrors(str) {
      let fixed = str;
      fixed = fixed.replace(/√É¬°/g, "√°");
      fixed = fixed.replace(/√É¬©/g, "√©");
      fixed = fixed.replace(/√É¬≥/g, "√≥");
      fixed = fixed.replace(/√É¬∫/g, "√∫");
      fixed = fixed.replace(/√É¬≠/g, "√≠");
      fixed = fixed.replace(/√É¬¢/g, "√¢");
      fixed = fixed.replace(/√É¬™/g, "√™");
      fixed = fixed.replace(/√É√¥/g, "√¥");
      fixed = fixed.replace(/√É√†/g, "√†");
      fixed = fixed.replace(/√É√£/g, "√£");
      fixed = fixed.replace(/√É√µ/g, "√µ");
      fixed = fixed.replace(/√É¬±/g, "√±");
      fixed = fixed.replace(/√É¬º/g, "√º");
      fixed = fixed.replace(/√É¬ß/g, "√ß");
      fixed = fixed.replace(/√É√Ä/g, "√Ä");
      fixed = fixed.replace(/√É√Å/g, "√Å");
      fixed = fixed.replace(/√É√Ç/g, "√Ç");
      fixed = fixed.replace(/√É√É/g, "√É");
      fixed = fixed.replace(/√É√â/g, "√â");
      fixed = fixed.replace(/√É√ä/g, "√ä");
      fixed = fixed.replace(/√É√ç/g, "√ç");
      fixed = fixed.replace(/√É√ì/g, "√ì");
      fixed = fixed.replace(/√É√î/g, "√î");
      fixed = fixed.replace(/√É√ï/g, "√ï");
      fixed = fixed.replace(/√É√ö/g, "√ö");
      fixed = fixed.replace(/√É√õ/g, "√õ");
      fixed = fixed.replace(/√É√ú/g, "√ú");
      fixed = fixed.replace(/√É√á/g, "√á");
      fixed = fixed.replace(/√¢‚Ç¨≈ì/g, "‚Äú");
      fixed = fixed.replace(/√¢‚Ç¨¬ù/g, "‚Äù");
      fixed = fixed.replace(/√¢‚Ç¨Àú/g, "‚Äò");
      fixed = fixed.replace(/√¢‚Ç¨‚Ñ¢/g, "‚Äô");
      fixed = fixed.replace(/√¢‚Ç¨¬¶/g, "‚Ä¶");
      fixed = fixed.replace(/√¢‚Ç¨‚Äú/g, "‚Äì");
      fixed = fixed.replace(/√¢‚Ç¨‚Äù/g, "‚Äî");
      fixed = fixed.replace(/√É∆í√Ç¬°/g, "√°"); // √° (√É¬° -> √É∆í√Ç¬°)
      fixed = fixed.replace(/√É∆í√Ç¬¢/g, "√¢"); // √¢ (√É¬¢ -> √É∆í√Ç¬¢)
      fixed = fixed.replace(/√É∆í√Ç¬£/g, "√£"); // √£ (√É¬£ -> √É∆í√Ç¬£)
      fixed = fixed.replace(/√É∆í√Ç¬§/g, "√§"); // √§ (√É¬§ -> √É∆í√Ç¬§)
      fixed = fixed.replace(/√É∆í√Ç¬•/g, "√•"); // √• (√É¬• -> √É∆í√Ç¬•)
      fixed = fixed.replace(/√É∆í√Ç¬¶/g, "√¶"); // √¶ (√É¬¶ -> √É∆í√Ç¬¶)
      fixed = fixed.replace(/√É∆í√Ç¬ß/g, "√ß"); // √ß (√É¬ß -> √É∆í√Ç¬ß)
      fixed = fixed.replace(/√É∆í√Ç¬®/g, "√®"); // √® (√É¬® -> √É∆í√Ç¬®)
      fixed = fixed.replace(/√É∆í√Ç¬©/g, "√©"); // √© (√É¬© -> √É∆í√Ç¬©)
      fixed = fixed.replace(/√É∆í√Ç¬™/g, "√™"); // √™ (√É¬™ -> √É∆í√Ç¬™)
      fixed = fixed.replace(/√É∆í√Ç¬´/g, "√´"); // √´ (√É¬´ -> √É∆í√Ç¬´)
      fixed = fixed.replace(/√É∆í√Ç¬¨/g, "√¨"); // √¨ (√É¬¨ -> √É∆í√Ç¬¨)
      fixed = fixed.replace(/√É∆í√Ç¬≠/g, "√≠"); // √≠ (√É¬≠ -> √É∆í√Ç¬≠)
      fixed = fixed.replace(/√É∆í√Ç¬Æ/g, "√Æ"); // √Æ (√É¬Æ -> √É∆í√Ç¬Æ)
      fixed = fixed.replace(/√É∆í√Ç¬Ø/g, "√Ø"); // √Ø (√É¬Ø -> √É∆í√Ç¬Ø)
      fixed = fixed.replace(/√É∆í√Ç¬∞/g, "√∞"); // √∞ (√É¬∞ -> √É∆í√Ç¬∞)
      fixed = fixed.replace(/√É∆í√Ç¬±/g, "√±"); // √± (√É¬± -> √É∆í√Ç¬±)
      fixed = fixed.replace(/√É∆í√Ç¬≤/g, "√≤"); // √≤ (√É¬≤ -> √É∆í√Ç¬≤)
      fixed = fixed.replace(/√É∆í√Ç¬≥/g, "√≥"); // √≥ (√É¬≥ -> √É∆í√Ç¬≥)
      fixed = fixed.replace(/√É∆í√Ç¬¥/g, "√¥"); // √¥ (√É¬¥ -> √É∆í√Ç¬¥)
      fixed = fixed.replace(/√É∆í√Ç¬µ/g, "√µ"); // √µ (√É¬µ -> √É∆í√Ç¬µ)
      fixed = fixed.replace(/√É∆í√Ç¬∂/g, "√∂"); // √∂ (√É¬∂ -> √É∆í√Ç¬∂)
      fixed = fixed.replace(/√É∆í√Ç¬∑/g, "√∑"); // √∑ (√É¬∑ -> √É∆í√Ç¬∑)
      fixed = fixed.replace(/√É∆í√Ç¬∏/g, "√∏"); // √∏ (√É¬∏ -> √É∆í√Ç¬∏)
      fixed = fixed.replace(/√É∆í√Ç¬π/g, "√π"); // √π (√É¬π -> √É∆í√Ç¬π)
      fixed = fixed.replace(/√É∆í√Ç¬∫/g, "√∫"); // √∫ (√É¬∫ -> √É∆í√Ç¬∫)
      fixed = fixed.replace(/√É∆í√Ç¬ª/g, "√ª"); // √ª (√É¬ª -> √É∆í√Ç¬ª)
      fixed = fixed.replace(/√É∆í√Ç¬º/g, "√º"); // √º (√É¬º -> √É∆í√Ç¬º)
      fixed = fixed.replace(/√É∆í√Ç¬Ω/g, "√Ω"); // √Ω (√É¬Ω -> √É∆í√Ç¬Ω)
      fixed = fixed.replace(/√É∆í√Ç¬æ/g, "√æ"); // √æ (√É¬æ -> √É∆í√Ç¬æ)
      fixed = fixed.replace(/√É∆í√Ç¬ø/g, "√ø"); // √ø (√É¬ø -> √É∆í√Ç¬ø)
      fixed = fixed.replace(/√É∆í√Ç\u00A0/g, "√†"); // √† (de √É\u00A0 -> √É∆í√Ç\u00A0)
      fixed = fixed.replace(/√É∆í√¢‚Äö¬¨/g, "√Ä"); // √Ä (√É‚Ç¨ -> √É∆í√¢‚Äö¬¨)
      fixed = fixed.replace(/√É∆í√Ç\u0081/g, "√Å"); // √Å (√É\u0081 -> √É∆í√Ç\u0081)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨≈°/g, "√Ç"); // √Ç (√É‚Äö -> √É∆í√¢‚Ç¨≈°)
      fixed = fixed.replace(/√É∆í√Ü‚Äô/g, "√É");   // √É (√É∆í -> √É∆í√Ü‚Äô)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨≈æ/g, "√Ñ"); // √Ñ (√É‚Äû -> √É∆í√¢‚Ç¨≈æ)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨¬¶/g, "√Ö"); // √Ö (√É‚Ä¶ -> √É∆í√¢‚Ç¨¬¶)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨ /g, "√Ü");  // √Ü (√É‚Ä† -> √É∆í√¢‚Ç¨ )
      fixed = fixed.replace(/√É∆í√¢‚Ç¨¬°/g, "√á"); // √á (√É‚Ä° -> √É∆í√¢‚Ç¨¬°)
      fixed = fixed.replace(/√É∆í√ã‚Ä†/g, "√à");   // √à (√ÉÀÜ -> √É∆í√ã‚Ä†)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨¬∞/g, "√â"); // √â (√É‚Ä∞ -> √É∆í√¢‚Ç¨¬∞)
      fixed = fixed.replace(/√É∆í√ÖScaron;/g, "√ä"); // √ä (√É≈† -> √É∆í√ÖScaron;)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨¬π/g, "√ã"); // √ã (√É‚Äπ -> √É∆í√¢‚Ç¨¬π)
      fixed = fixed.replace(/√É∆í√Ö‚Äô/g, "√å");   // √å (√É≈í -> √É∆í√Ö‚Äô)
      fixed = fixed.replace(/√É∆í√Ç\u008D/g, "√ç"); // √ç (√É\u008D -> √É∆í√Ç\u008D)
      fixed = fixed.replace(/√É∆í√Ö¬Ω/g, "√é");   // √é (√É≈Ω -> √É∆í√Ö¬Ω)
      fixed = fixed.replace(/√É∆í√Ç\u008F/g, "√è"); // √è (√É\u008F -> √É∆í√Ç\u008F)
      fixed = fixed.replace(/√É∆í√Ç\u0090/g, "√ê"); // √ê (√É\u0090 -> √É∆í√Ç\u0090)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨Àú/g, "√ë"); // √ë (√É‚Äò -> √É∆í√¢‚Ç¨Àú)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨‚Ñ¢/g, "√í"); // √í (√É‚Äô -> √É∆í√¢‚Ç¨‚Ñ¢)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨≈ì/g, "√ì"); // √ì (√É‚Äú -> √É∆í√¢‚Ç¨≈ì)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨\u009D/g, "√î"); // √î (√É‚Äù -> √É∆í√¢‚Ç¨ ). 
      fixed = fixed.replace(/√É∆í√¢‚Ç¨¬¢/g, "√ï"); // √ï (√É‚Ä¢ -> √É∆í√¢‚Ç¨¬¢)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨‚Äú/g, "√ñ"); // √ñ (√É‚Äì -> √É∆í√¢‚Ç¨‚Äú)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨‚Äù/g, "√ó"); // √ó (√É‚Äî -> √É∆í√¢‚Ç¨‚Äù)
      fixed = fixed.replace(/√É∆í√ã≈ì/g, "√ò");   // √ò (√ÉÀú -> √É∆í√ã≈ì)
      fixed = fixed.replace(/√É∆í√¢‚Äû¬¢/g, "√ô"); // √ô (√É‚Ñ¢ -> √É∆í√¢‚Äû¬¢)
      fixed = fixed.replace(/√É∆í√Ö¬°/g, "√ö");   // √ö (√É≈° -> √É∆í√Ö¬°)
      fixed = fixed.replace(/√É∆í√¢‚Ç¨¬∫/g, "√õ"); // √õ (√É‚Ä∫ -> √É∆í√¢‚Ç¨¬∫)
      fixed = fixed.replace(/√É∆í√Ö‚Äú/g, "√ú");   // √ú (√É≈ì -> √É∆í√Ö‚Äú)
      fixed = fixed.replace(/√É∆í√Ç\u009D/g, "√ù"); // √ù (√É\u009D -> √É∆í√Ç\u009D)
      fixed = fixed.replace(/√É∆í√Ö¬æ/g, "√û");   // √û (√É≈æ -> √É∆í√Ö¬æ)
      fixed = fixed.replace(/√É∆í√Ö¬∏/g, "√ü");
      fixed = fixed.replace(/√É∆í√É\u00A0/g, "√†");
      fixed = fixed.replace(/√É¬°/g, "√°"); // √° (originalmente √É¬°, onde ¬° √© U+00A1)
      fixed = fixed.replace(/√É¬©/g, "√©"); // √© (originalmente √É¬©, onde ¬© √© U+00A9)
      fixed = fixed.replace(/√É¬≠/g, "√≠"); // √≠ (originalmente √É¬≠, onde ¬≠ (SHY) √© U+00AD)
      fixed = fixed.replace(/√É¬≥/g, "√≥"); // √≥ (originalmente √É¬≥, onde ¬≥ √© U+00B3)
      fixed = fixed.replace(/√É¬∫/g, "√∫"); // √∫ (originalmente √É¬∫, onde ¬∫ √© U+00BA)
      fixed = fixed.replace(/√É¬¢/g, "√¢"); // √¢ (originalmente √É¬¢, onde ¬¢ √© U+00A2)
      fixed = fixed.replace(/√É¬™/g, "√™"); // √™ (originalmente √É¬™, onde ¬™ √© U+00AA)
      fixed = fixed.replace(/√É√¥/g, "√¥"); // √¥ (originalmente √É¬¥, onde ¬¥ √© U+00B4)
      fixed = fixed.replace(/√É√†/g, "√†"); // √† (caso espec√≠fico do usu√°rio: √É seguido do caractere √† U+00E0)
      fixed = fixed.replace(/√É√£/g, "√£"); // √£ (originalmente √É¬£, onde ¬£ √© U+00A3)
      fixed = fixed.replace(/√É¬µ/g, "√µ"); // √µ (originalmente √É¬µ, onde ¬µ √© U+00B5)
      fixed = fixed.replace(/√É¬±/g, "√±"); // √± (originalmente √É¬±, onde ¬± √© U+00B1)
      fixed = fixed.replace(/√É¬º/g, "√º"); // √º (originalmente √É¬º, onde ¬º √© U+00BC)

      // Subgrupo 2.2: Adi√ß√µes para min√∫sculas PT-BR e outros comuns (ISO-8859-1)
      fixed = fixed.replace(/√É\u00A0/g, "√†"); // √† (comum: √É seguido de Non-Breaking Space U+00A0)
      fixed = fixed.replace(/√É¬ß/g, "√ß"); // √ß (√É¬ß, onde ¬ß √© U+00A7)
      fixed = fixed.replace(/√É¬®/g, "√®"); // √® (√É¬®, onde ¬® √© U+00A8)
      fixed = fixed.replace(/√É¬´/g, "√´"); // √´ (√É¬´, onde ¬´ √© U+00AB)
      fixed = fixed.replace(/√É¬¨/g, "√¨"); // √¨ (√É¬¨, onde ¬¨ √© U+00AC)
      fixed = fixed.replace(/√É¬Æ/g, "√Æ"); // √Æ (√É¬Æ, onde ¬Æ √© U+00AE)
      fixed = fixed.replace(/√É¬Ø/g, "√Ø"); // √Ø (√É¬Ø, onde √Ø √© U+00EF)
      fixed = fixed.replace(/√É¬∞/g, "√∞"); // √∞ (√É¬∞, onde ¬∞ √© U+00B0)
      fixed = fixed.replace(/√É¬≤/g, "√≤"); // √≤ (√É¬≤, onde ¬≤ √© U+00B2)
      fixed = fixed.replace(/√É¬∂/g, "√∂"); // √∂ (√É¬∂, onde √∂ √© U+00F6)
      fixed = fixed.replace(/√É¬∑/g, "√∑"); // √∑ (√É¬∑, onde ¬∑ √© U+00B7)
      fixed = fixed.replace(/√É¬∏/g, "√∏"); // √∏ (√É¬∏, onde √∏ √© U+00F8)
      fixed = fixed.replace(/√É¬π/g, "√π"); // √π (√É¬π, onde ¬π √© U+00B9)
      fixed = fixed.replace(/√É¬ª/g, "√ª"); // √ª (√É¬ª, onde ¬ª √© U+00BB)
      // √É¬º j√° est√° acima
      fixed = fixed.replace(/√É¬Ω/g, "√Ω"); // √Ω (√É¬Ω, onde √Ω √© U+00FD)
      fixed = fixed.replace(/√É¬æ/g, "√æ"); // √æ (√É¬æ, onde √æ √© U+00FE)
      fixed = fixed.replace(/√É¬ø/g, "√ø"); // √ø (√É¬ø, onde ¬ø √© U+00BF)
      fixed = fixed.replace(/√É¬§/g, "√§"); // √§ (√É¬§, onde √§ √© U+00E4)
      fixed = fixed.replace(/√É¬•/g, "√•"); // √• (√É¬•, onde √• √© U+00E5)
      fixed = fixed.replace(/√É¬¶/g, "√¶"); // √¶ (√É√¶, onde √¶ √© U+00E6)


      // Subgrupo 2.3: Adi√ß√µes para mai√∫sculas PT-BR e outros (Windows-1252)
      // (√É seguido por caractere da faixa 0x80-0x9F do Windows-1252)
      fixed = fixed.replace(/√É‚Ç¨/g, "√Ä"); // √Ä (√É seguido de ‚Ç¨ U+20AC, que √© 0x80 em Win-1252)
      fixed = fixed.replace(/√É\u0081/g, "√Å"); // √Å (√É seguido de char code 0x81 U+0081)
      fixed = fixed.replace(/√É‚Äö/g, "√Ç"); // √Ç (√É seguido de ‚Äö U+201A, que √© 0x82 em Win-1252)
      fixed = fixed.replace(/√É∆í/g, "√É");   // √É (√É seguido de ∆í U+0192, que √© 0x83 em Win-1252)
      fixed = fixed.replace(/√É‚Äû/g, "√Ñ"); // √Ñ (√É seguido de ‚Äû U+201E, que √© 0x84 em Win-1252)
      fixed = fixed.replace(/√É‚Ä¶/g, "√Ö"); // √Ö (√É seguido de ‚Ä¶ U+2026, que √© 0x85 em Win-1252)
      fixed = fixed.replace(/√É‚Ä†/g, "√Ü"); // √Ü (√É seguido de ‚Ä† U+2020, que √© 0x86 em Win-1252)
      fixed = fixed.replace(/√É‚Ä°/g, "√á"); // √á (√É seguido de ‚Ä° U+2021, que √© 0x87 em Win-1252)
      fixed = fixed.replace(/√ÉÀÜ/g, "√à"); // √à (√É seguido de ÀÜ U+02C6, que √© 0x88 em Win-1252)
      fixed = fixed.replace(/√É‚Ä∞/g, "√â"); // √â (√É seguido de ‚Ä∞ U+2030, que √© 0x89 em Win-1252)
      fixed = fixed.replace(/√É≈†/g, "√ä"); // √ä (√É seguido de ≈† U+0160, que √© 0x8A em Win-1252)
      fixed = fixed.replace(/√É‚Äπ/g, "√ã"); // √ã (√É seguido de ‚Äπ U+2039, que √© 0x8B em Win-1252)
      fixed = fixed.replace(/√É≈í/g, "√å"); // √å (√É seguido de ≈í U+0152, que √© 0x8C em Win-1252)
      fixed = fixed.replace(/√É\u008D/g, "√ç"); // √ç (√É seguido de char code 0x8D U+008D)
      fixed = fixed.replace(/√É≈Ω/g, "√é"); // √é (√É seguido de ≈Ω U+017D, que √© 0x8E em Win-1252)
      fixed = fixed.replace(/√É\u008F/g, "√è"); // √è (√É seguido de char code 0x8F U+008F)
      fixed = fixed.replace(/√É\u0090/g, "√ê"); // √ê (√É seguido de char code 0x90 U+0090)
      fixed = fixed.replace(/√É‚Äò/g, "√ë"); // √ë (√É seguido de ‚Äò U+2018, que √© 0x91 em Win-1252)
      fixed = fixed.replace(/√É‚Äô/g, "√í"); // √í (√É seguido de ‚Äô U+2019, que √© 0x92 em Win-1252)
      fixed = fixed.replace(/√É‚Äú/g, "√ì"); // √ì (√É seguido de ‚Äú U+201C, que √© 0x93 em Win-1252)
      fixed = fixed.replace(/√É‚Äù/g, "√î"); // √î (√É seguido de ‚Äù U+201D, que √© 0x94 em Win-1252)
      fixed = fixed.replace(/√É‚Ä¢/g, "√ï"); // √ï (√É seguido de ‚Ä¢ U+2022, que √© 0x95 em Win-1252)
      fixed = fixed.replace(/√É‚Äì/g, "√ñ"); // √ñ (√É seguido de ‚Äì U+2013, que √© 0x96 em Win-1252)
      fixed = fixed.replace(/√É‚Äî/g, "√ó"); // √ó (√É seguido de ‚Äî U+2014, que √© 0x97 em Win-1252)
      fixed = fixed.replace(/√ÉÀú/g, "√ò"); // √ò (√É seguido de Àú U+02DC, que √© 0x98 em Win-1252)
      fixed = fixed.replace(/√É‚Ñ¢/g, "√ô"); // √ô (√É seguido de ‚Ñ¢ U+2122, que √© 0x99 em Win-1252)
      fixed = fixed.replace(/√É≈°/g, "√ö"); // √ö (√É seguido de ≈° U+0161, que √© 0x9A em Win-1252)
      fixed = fixed.replace(/√É‚Ä∫/g, "√õ"); // √õ (√É seguido de ‚Ä∫ U+203A, que √© 0x9B em Win-1252)
      fixed = fixed.replace(/√É≈ì/g, "√ú"); // √ú (√É seguido de ≈ì U+0153, que √© 0x9C em Win-1252)
      fixed = fixed.replace(/√É\u009D/g, "√ù"); // √ù (√É seguido de char code 0x9D U+009D)
      fixed = fixed.replace(/√É≈æ/g, "√û"); // √û (√É seguido de ≈æ U+017E, que √© 0x9E em Win-1252)
      fixed = fixed.replace(/√É≈∏/g, "√ü"); // √ü (√É seguido de ≈∏ U+0178, que √© 0x9F em Win-1252)

      return fixed;
    }


    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function padZero(num, size) {
      let s = String(num);
      while (s.length < size) s = "0" + s;
      return s;
    }
    function getRandomChar(str) {
      return str[Math.floor(Math.random() * str.length)];
    }

    // CNH
    const btnGerarCnh = document.getElementById("btn-gerar-cnh");
    const outputCnh = document.getElementById("output-cnh");
    if (btnGerarCnh && outputCnh) {
      btnGerarCnh.addEventListener("click", () => {
        let cnh = "";
        for (let i = 0; i < 11; i++) {
          cnh += getRandomInt(0, 9);
        }
        const validYear = new Date().getFullYear() + getRandomInt(2, 7);
        const validMonth = getRandomInt(1, 12);
        const validDay = getRandomInt(1, 28);
        const categories = ["A", "B", "AB", "C", "D", "E", "AC", "AD", "AE"];
        const category = categories[getRandomInt(0, categories.length - 1)];
        outputCnh.textContent =
          "N√∫mero CNH (Inv√°lido): " + cnh +
          "\nValidade (Fict√≠cia): " + padZero(validDay, 2) + "/" + padZero(validMonth, 2) + "/" + validYear +
          "\nCategoria (Aleat√≥ria): " + category;
        outputCnh.className = "output-area";
        outputCnh.style.display = "block";
      });
    }

    // Bancos
    const sampleBanks = [
      { code: "001", name: "Banco do Brasil" },
      { code: "237", name: "Bradesco" },
      { code: "341", name: "Ita√∫ Unibanco" },
      { code: "104", name: "Caixa Econ√¥mica Federal" },
      { code: "033", name: "Santander" },
      { code: "745", name: "Citibank" },
      { code: "260", name: "Nu Pagamentos (Nubank)" },
      { code: "077", name: "Banco Inter" },
      { code: "336", name: "Banco C6" },
    ];

    let banksPopulated = false;
    function populateBankSelect() {
      const contaBancoSelect = document.getElementById("conta-banco-select");
      if (!contaBancoSelect || banksPopulated) return;
      while (contaBancoSelect.options.length > 1) {
        contaBancoSelect.remove(1);
      }
      sampleBanks.forEach(bank => {
        const option = document.createElement("option");
        option.value = bank.code;
        option.textContent = `${bank.code}-${bank.name}`;
        contaBancoSelect.appendChild(option);
      });
      banksPopulated = true;
    }
    populateBankSelect();

    const btnGerarConta = document.getElementById("btn-gerar-conta");
    const outputConta = document.getElementById("output-conta");
    if (btnGerarConta && outputConta) {
      btnGerarConta.addEventListener("click", () => {
        outputConta.className = "output-area";
        outputConta.style.display = "block";

        const contaBancoSelect = document.getElementById("conta-banco-select");
        let selectedBankCode = contaBancoSelect.value;
        let bank;
        if (selectedBankCode) {
          bank = sampleBanks.find(b => b.code === selectedBankCode);
        } else {
          bank = sampleBanks[getRandomInt(0, sampleBanks.length - 1)];
        }
        if (!bank) {
          bank = { code: "000", name: "Banco Desconhecido" };
        }
        const agencia = padZero(getRandomInt(1, 9999), 4);
        const contaNum = padZero(getRandomInt(1000, 999999), 6);
        const contaDv = getRandomInt(0, 9);
        outputConta.textContent =
          `Banco: ${bank.code}-${bank.name}\nAg√™ncia: ${agencia}\nConta: ${contaNum}-${contaDv}`;
      });
    }

    // CPF
    const btnGerarCpf = document.getElementById("btn-gerar-cpf");
    const outputCpf = document.getElementById("output-cpf");
    const cpfFormatadoCheck = document.getElementById("cpf-formatado");
    if (btnGerarCpf && outputCpf && cpfFormatadoCheck) {
      btnGerarCpf.addEventListener("click", () => {
        outputCpf.className = "output-area";
        outputCpf.style.display = "block";

        let cpf = "";
        for (let i = 0; i < 11; i++) {
          cpf += getRandomInt(0, 9);
        }
        if (cpfFormatadoCheck.checked) {
          cpf = cpf.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, "$1.$2.$3-$4");
        }
        outputCpf.textContent = cpf;
      });
    }

    // Nicks
    const btnGerarNicks = document.getElementById("btn-gerar-nicks");
    const outputNicks = document.getElementById("output-nicks");
    const nickKeywordInput = document.getElementById("nick-keyword");
    const nickQtdInput = document.getElementById("nick-qtd");
    const nickPrefixes = ["Shadow", "Night", "Cyber", "Iron", "Dark", "Light", ""];
    const nickSuffixes = ["Hunter", "Blade", "Warrior", "Mage", "Pro", "King", "Queen", ""];
    if (btnGerarNicks && outputNicks && nickKeywordInput && nickQtdInput) {
      btnGerarNicks.addEventListener("click", () => {
        outputNicks.className = "output-area large";
        outputNicks.style.display = "block";

        const keyword = nickKeywordInput.value.trim().replace(/\s+/g, "");
        const qtd = parseInt(nickQtdInput.value) || 5;
        if (qtd < 1 || qtd > 50) {
          outputNicks.textContent = "Quantidade deve ser entre 1 e 50.";
          outputNicks.classList.add("error");
          return;
        }
        let nicks = new Set();
        const baseWord = keyword || nickSuffixes[getRandomInt(0, nickSuffixes.length - 2)];
        while (nicks.size < qtd) {
          let nick = "";
          const type = getRandomInt(1, 5);
          const prefix = nickPrefixes[getRandomInt(0, nickPrefixes.length - 1)];
          const suffix = nickSuffixes[getRandomInt(0, nickSuffixes.length - 1)];
          const number = getRandomInt(1, 999);
          switch (type) {
            case 1: nick = prefix + baseWord + number; break;
            case 2: nick = baseWord + suffix + "_" + number; break;
            case 3: nick = prefix + baseWord + suffix; break;
            case 4:
              nick = baseWord
                .replace(/a/gi, "4")
                .replace(/e/gi, "3")
                .replace(/i/gi, "1")
                .replace(/o/gi, "0")
                + number;
              break;
            case 5: nick = baseWord + getRandomInt(10, 99); break;
          }
          if (nick.length > 3 && nick.length < 20) {
            nicks.add(nick);
          }
          if (nicks.size >= qtd * 5 && nicks.size < qtd) {
            break;
          }
        }
        outputNicks.textContent = Array.from(nicks).join("\n");
      });
    }

    // Nome
    const btnGerarNome = document.getElementById("btn-gerar-nome");
    const outputNome = document.getElementById("output-nome");
    const nomeGeneroSelect = document.getElementById("nome-genero");
    const firstNamesM = ["Arthur", "Heitor", "Miguel", "Davi", "Gabriel", "Pedro", "Lucas", "Matheus", "Bernardo", "Rafael"];
    const firstNamesF = ["Alice", "Sophia", "Helena", "Laura", "Manuela", "Valentina", "Isabella", "Helo√≠sa", "Maria Lu√≠za", "Mariana"];
    const lastNames = ["Silva", "Santos", "Oliveira", "Souza", "Rodrigues", "Ferreira", "Alves", "Pereira", "Lima", "Gomes", "Costa", "Ribeiro", "Martins", "Carvalho"];
    if (btnGerarNome && outputNome && nomeGeneroSelect) {
      btnGerarNome.addEventListener("click", () => {
        outputNome.className = "output-area";
        outputNome.style.display = "block";

        const genero = nomeGeneroSelect.value;
        let firstName = "";
        if (genero === "masculino") {
          firstName = firstNamesM[getRandomInt(0, firstNamesM.length - 1)];
        } else if (genero === "feminino") {
          firstName = firstNamesF[getRandomInt(0, firstNamesF.length - 1)];
        } else {
          const allFirstNames = [...firstNamesM, ...firstNamesF];
          firstName = allFirstNames[getRandomInt(0, allFirstNames.length - 1)];
        }
        const lastName1 = lastNames[getRandomInt(0, lastNames.length - 1)];
        let lastName2 = lastNames[getRandomInt(0, lastNames.length - 1)];
        while (lastName2 === lastName1) {
          lastName2 = lastNames[getRandomInt(0, lastNames.length - 1)];
        }
        outputNome.textContent = `${firstName} ${lastName1} ${lastName2}`;
      });
    }

    // Data Nasc
    const btnGerarDataNasc = document.getElementById("btn-gerar-data-nasc");
    const outputDataNasc = document.getElementById("output-data-nasc");
    const nascAnoMinInput = document.getElementById("nasc-ano-min");
    const nascAnoMaxInput = document.getElementById("nasc-ano-max");
    if (btnGerarDataNasc && outputDataNasc && nascAnoMinInput && nascAnoMaxInput) {
      btnGerarDataNasc.addEventListener("click", () => {
        outputDataNasc.className = "output-area";
        outputDataNasc.style.display = "block";

        const minYear = parseInt(nascAnoMinInput.value) || 1950;
        const maxYear = parseInt(nascAnoMaxInput.value) || new Date().getFullYear() - 18;
        if (isNaN(minYear) || isNaN(maxYear) || minYear > maxYear || minYear < 1900 || maxYear > new Date().getFullYear()) {
          outputDataNasc.textContent = "Erro: Intervalo de anos inv√°lido.";
          outputDataNasc.classList.add("error");
          return;
        }
        const year = getRandomInt(minYear, maxYear);
        const month = getRandomInt(1, 12);
        const daysInMonth = new Date(year, month, 0).getDate();
        const day = getRandomInt(1, daysInMonth);
        outputDataNasc.textContent = `${padZero(day, 2)}/${padZero(month, 2)}/${year}`;
      });
    }

    // N√∫meros Aleat√≥rios
    const btnGerarNumeros = document.getElementById("btn-gerar-numeros");
    const outputNumeros = document.getElementById("output-numeros");
    if (btnGerarNumeros && outputNumeros) {
      btnGerarNumeros.addEventListener("click", () => {
        outputNumeros.className = "output-area";
        outputNumeros.style.display = "block";

        const minInput = document.getElementById("num-min");
        const maxInput = document.getElementById("num-max");
        const qtdInput = document.getElementById("num-qtd");
        const repetirCheck = document.getElementById("num-repetir");
        const min = parseInt(minInput.value);
        const max = parseInt(maxInput.value);
        const qtd = parseInt(qtdInput.value);
        const repetir = repetirCheck.checked;
        if (isNaN(min) || isNaN(max) || isNaN(qtd)) {
          outputNumeros.textContent = "Erro: Valores inv√°lidos.";
          outputNumeros.classList.add("error");
          return;
        }
        if (min > max) {
          outputNumeros.textContent = "Erro: M√≠nimo n√£o pode ser maior que M√°ximo.";
          outputNumeros.classList.add("error");
          return;
        }
        if (qtd < 1 || qtd > 1000) {
          outputNumeros.textContent = "Erro: Quantidade deve ser entre 1 e 1000.";
          outputNumeros.classList.add("error");
          return;
        }
        const rangeSize = max - min + 1;
        if (!repetir && qtd > rangeSize) {
          outputNumeros.textContent =
            `Erro: Imposs√≠vel gerar ${qtd} n√∫meros √∫nicos no intervalo de ${rangeSize} n√∫meros.`;
          outputNumeros.classList.add("error");
          return;
        }
        const numeros = [];
        if (repetir) {
          for (let i = 0; i < qtd; i++) {
            numeros.push(getRandomInt(min, max));
          }
        } else {
          const available = new Set();
          while (numeros.length < qtd) {
            const num = getRandomInt(min, max);
            if (!available.has(num)) {
              numeros.push(num);
              available.add(num);
            }
            if (available.size >= rangeSize && numeros.length < qtd) {
              break;
            }
          }
        }
        outputNumeros.textContent = numeros.join(", ");
      });
    }

    // PIS/PASEP
    const btnGerarPis = document.getElementById("btn-gerar-pis");
    const outputPis = document.getElementById("output-pis");
    const pisFormatadoCheck = document.getElementById("pis-formatado");
    if (btnGerarPis && outputPis && pisFormatadoCheck) {
      btnGerarPis.addEventListener("click", () => {
        outputPis.className = "output-area";
        outputPis.style.display = "block";

        let pis = "";
        for (let i = 0; i < 11; i++) {
          pis += getRandomInt(0, 9);
        }
        if (pisFormatadoCheck.checked) {
          pis = pis.replace(/(\d{3})(\d{5})(\d{2})(\d{1})/, "$1.$2.$3-$4");
        }
        outputPis.textContent = pis;
      });
    }

    // CNPJ
    const btnGerarCnpj = document.getElementById("btn-gerar-cnpj");
    const outputCnpj = document.getElementById("output-cnpj");
    const cnpjFormatadoCheck = document.getElementById("cnpj-formatado");
    if (btnGerarCnpj && outputCnpj && cnpjFormatadoCheck) {
      btnGerarCnpj.addEventListener("click", () => {
        outputCnpj.className = "output-area";
        outputCnpj.style.display = "block";

        let cnpj = "";
        for (let i = 0; i < 14; i++) {
          cnpj += getRandomInt(0, 9);
        }
        if (cnpjFormatadoCheck.checked) {
          cnpj = cnpj.replace(
            /(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,
            "$1.$2.$3/$4-$5"
          );
        }
        outputCnpj.textContent = cnpj;
      });
    }

    // CEP
    const btnGerarCep = document.getElementById("btn-gerar-cep");
    const outputCep = document.getElementById("output-cep");
    const cepFormatadoCheck = document.getElementById("cep-formatado");
    if (btnGerarCep && outputCep && cepFormatadoCheck) {
      btnGerarCep.addEventListener("click", () => {
        outputCep.className = "output-area";
        outputCep.style.display = "block";

        let cep = "";
        for (let i = 0; i < 8; i++) {
          cep += getRandomInt(0, 9);
        }
        if (cepFormatadoCheck.checked) {
          cep = cep.replace(/(\d{5})(\d{3})/, "$1-$2");
        }
        outputCep.textContent = cep;
      });
    }

    // RG
    const btnGerarRg = document.getElementById("btn-gerar-rg");
    const outputRg = document.getElementById("output-rg");
    const rgUfSelect = document.getElementById("rg-uf");
    if (btnGerarRg && outputRg && rgUfSelect) {
      btnGerarRg.addEventListener("click", () => {
        outputRg.className = "output-area";
        outputRg.style.display = "block";

        const uf = rgUfSelect.value;
        let rg = "";
        const dv = getRandomInt(0, 9);
        if (uf === "SP") {
          for (let i = 0; i < 8; i++) rg += getRandomInt(0, 9);
          rg = rg.replace(/(\d{2})(\d{3})(\d{3})/, `$1.$2.$3-${dv}`);
        } else if (uf === "RJ") {
          for (let i = 0; i < 8; i++) rg += getRandomInt(0, 9);
          rg = `${rg}-${dv}`;
        } else {
          for (let i = 0; i < 9; i++) rg += getRandomInt(0, 9);
        }
        outputRg.textContent = rg;
      });
    }

    // IE
    const btnGerarIe = document.getElementById("btn-gerar-ie");
    const outputIe = document.getElementById("output-ie");
    const ieUfSelect = document.getElementById("ie-uf");
    if (btnGerarIe && outputIe && ieUfSelect) {
      btnGerarIe.addEventListener("click", () => {
        outputIe.className = "output-area";
        outputIe.style.display = "block";

        const uf = ieUfSelect.value;
        let ie = "";
        if (uf === "SP") {
          for (let i = 0; i < 12; i++) ie += getRandomInt(0, 9);
          ie = ie.replace(/(\d{3})(\d{3})(\d{3})(\d{3})/, "$1.$2.$3.$4");
          outputIe.textContent = ie;
        } else {
          ie = "Formato n√£o implementado para esta UF (Exemplo apenas para SP).";
          outputIe.textContent = ie;
          outputIe.classList.add("warning");
        }
      });
    }

    // T√≠tulo de Eleitor
    const btnGerarTitulo = document.getElementById("btn-gerar-titulo");
    const outputTitulo = document.getElementById("output-titulo");
    const tituloFormatadoCheck = document.getElementById("titulo-formatado");
    if (btnGerarTitulo && outputTitulo && tituloFormatadoCheck) {
      btnGerarTitulo.addEventListener("click", () => {
        outputTitulo.className = "output-area";
        outputTitulo.style.display = "block";

        let titulo = "";
        for (let i = 0; i < 12; i++) {
          titulo += getRandomInt(0, 9);
        }
        if (tituloFormatadoCheck.checked) {
          titulo = titulo.replace(/(\d{4})(\d{4})(\d{2})(\d{2})/, "$1 $2 $3 $4");
        }
        outputTitulo.textContent = titulo;
      });
    }

    // Senha
    const btnGerarSenha = document.getElementById("btn-gerar-senha");
    const outputSenha = document.getElementById("output-senha");
    if (btnGerarSenha && outputSenha) {
      btnGerarSenha.addEventListener("click", () => {
        outputSenha.className = "output-area";
        outputSenha.style.display = "block";

        const length = parseInt(document.getElementById("senha-length").value);
        const includeUpper = document.getElementById("senha-upper").checked;
        const includeLower = document.getElementById("senha-lower").checked;
        const includeNumbers = document.getElementById("senha-numbers").checked;
        const includeSymbols = document.getElementById("senha-symbols").checked;

        if (isNaN(length) || length < 4 || length > 128) {
          outputSenha.textContent = "Erro: Comprimento inv√°lido (4-128).";
          outputSenha.classList.add("error");
          return;
        }

        const upperChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        const lowerChars = "abcdefghijklmnopqrstuvwxyz";
        const numberChars = "0123456789";
        const symbolChars = "!@#$%&*()_+-=[]{}|;:,.<>?";
        let charset = "";
        let requiredChars = "";

        if (includeUpper) {
          charset += upperChars;
          requiredChars += getRandomChar(upperChars);
        }
        if (includeLower) {
          charset += lowerChars;
          requiredChars += getRandomChar(lowerChars);
        }
        if (includeNumbers) {
          charset += numberChars;
          requiredChars += getRandomChar(numberChars);
        }
        if (includeSymbols) {
          charset += symbolChars;
          requiredChars += getRandomChar(symbolChars);
        }
        if (!charset) {
          outputSenha.textContent = "Erro: Selecione ao menos um tipo de caractere.";
          outputSenha.classList.add("error");
          return;
        }
        if (requiredChars.length > length) {
          outputSenha.textContent = "Erro: Comprimento menor que os caracteres requeridos.";
          outputSenha.classList.add("error");
          return;
        }
        let password = requiredChars;
        const remainingLength = length - requiredChars.length;
        for (let i = 0; i < remainingLength; i++) {
          password += getRandomChar(charset);
        }
        // Embaralha
        password = password.split("").sort(() => 0.5 - Math.random()).join("");
        outputSenha.textContent = password;
      });
    }

    const btnGerarPdf = document.getElementById("btn-gerar-pdf");
    const pdfTextContent = document.getElementById("pdf-text-content");
    const pdfBaseFilename = document.getElementById("pdf-base-filename");
    const pdfNextCountSpan = document.getElementById("pdf-next-count");
    let pdfFileCounter = 1;
    if (btnGerarPdf && pdfTextContent && pdfBaseFilename && pdfNextCountSpan) {
      pdfNextCountSpan.textContent = pdfFileCounter;
      btnGerarPdf.addEventListener("click", () => {
        try {
          if (typeof jsPDF === "undefined") {
            alert("Erro: Biblioteca jsPDF n√£o carregada.");
            return;
          }
          const doc = new jsPDF();
          const text = pdfTextContent.value || "Nenhum conte√∫do fornecido.";
          const baseName = (pdfBaseFilename.value.trim() || "documento")
            .replace(/[^a-zA-Z0-9_\-\.]/g, "_")
            .replace(/\s+/g, "_");
          const filename = `${baseName}_${pdfFileCounter}.pdf`;
          const lines = doc.splitTextToSize(text, 180);
          doc.text(lines, 10, 10);
          doc.save(filename);
          pdfFileCounter++;
          pdfNextCountSpan.textContent = pdfFileCounter;
        } catch (error) {
          console.error("Erro ao gerar PDF:", error);
          alert("Ocorreu um erro ao gerar o PDF: " + error.message);
        }
      });
    }

    const anotacoesTexto = document.getElementById("anotacoes-texto");
    const btnSalvarAnotacoes = document.getElementById("btn-salvar-anotacoes");
    const anotacoesStatus = document.getElementById("anotacoes-status");
    if (anotacoesTexto && btnSalvarAnotacoes && anotacoesStatus) {
      function carregarAnotacoes() {
        const salvas = localStorage.getItem("anotacoesUsuario");
        if (salvas) {
          anotacoesTexto.value = salvas;
        }
      }
      carregarAnotacoes();

      btnSalvarAnotacoes.addEventListener("click", () => {
        localStorage.setItem("anotacoesUsuario", anotacoesTexto.value);
        anotacoesStatus.textContent = "Anota√ß√µes salvas localmente!";
        anotacoesStatus.className = "output-area success";
        anotacoesStatus.style.display = "block";
      });
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+k8VWQ+0Ys8NlmvJLPSBfH0bZ+jFQKRyTRtfq6f0fN0rKcHtkR6fOm5KTJZf" crossorigin="anonymous"></script>
</body>

</html>